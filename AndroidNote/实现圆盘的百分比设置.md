# 实现圆盘的百分比设置

这里的显示颜色以及颜色块的大小你都可以自己设置

这里设置了三种颜色,对应三种颜色的三个角度

上代码:

 

```

```

以上都属于自定义属性,当然自定义了属性就要给它赋值

 

 

```
TypedArray mArray = context.obtainStyledAttributes(attrs,
				R.styleable.CustomCircle, defStyleAttr, 0);
		firstColor = mArray.getColor(R.styleable.CustomCircle_firstColor,
				Color.BLUE);
		secondColor = mArray.getColor(R.styleable.CustomCircle_secondColor,
				Color.GREEN);
		thirdColor = mArray.getColor(R.styleable.CustomCircle_thirdColor,
				Color.RED);
		firstAngle=mArray.getInt(R.styleable.CustomCircle_firstAngle, 90);
		secondAngle=mArray.getInt(R.styleable.CustomCircle_secondAngle, 180);
		thirdAngle=mArray.getInt(R.styleable.CustomCircle_thirdAngle, 120);
		
		mArray.recycle();
```

属性赋值结束后,当然就要开始最重要的部分了,画图,也就是重写onDraw()方法

 

 

```
@Override
	protected void onDraw(Canvas canvas) {
		int center=getWidth()/2;
		int radius=center/2;
		mPaint.setColor(Color.GRAY);
		mPaint.setStrokeWidth(center);
		mPaint.setAntiAlias(true);
		mPaint.setStyle(Paint.Style.STROKE);
		canvas.drawCircle(center, center, radius, mPaint);
		mPaint.setColor(firstColor);
		RectF rectF=new RectF(center-radius, center-radius, center+radius, center+radius);
		canvas.drawArc(rectF, 0, firstAngle, false, mPaint);
		mPaint.setColor(secondColor);
		canvas.drawArc(rectF, firstAngle, secondAngle, false, mPaint);
		mPaint.setColor(thirdColor);
		canvas.drawArc(rectF, secondAngle, thirdAngle, false, mPaint);
	}
```

我们继续,自定义控件就这么定义结束了,如何用呢?看过前面博客的人们应该知道吧!

 

 

```

```

这里需要注意的是custom,这就是你自定义的属性了,前面要声明一下xmlns:custom=https://schemas.android.com/apk/res/你自己的包名

 

 

差不多就这样啦,就实现了你想要的功能,当你看不懂别人的代码逻辑时,你可以debug,这也是一个很好地办法

---



